## Installing Required Packages

To begin, install the necessary packages in your Sveltekit project directory. You can choose one of the following package managers:

<CodeGroup>

```bash npm

npm i @trigger.dev/sdk @trigger.dev/sveltekit

```

```bash pnpm
pnpm install @trigger.dev/sdk @trigger.dev/sveltekit

```

```bash yarn
yarn add @trigger.dev/sdk @trigger.dev/sveltekit

```

</CodeGroup>

## Obtaining the Development API Key

To locate your development API key, login to the [Trigger.dev
dashboard](https://cloud.trigger.dev) and select the Project you want to
connect to. Then click on the Environments & API Keys tab in the left menu.
You can copy your development API Key from the field at the top of this page.
(Your development key will start with `tr_dev_`).

## Adding Environment Variables

Create a `.env` file at the root of your project and include your Trigger API key and URL like this:

```bash

TRIGGER_API_KEY=ENTER_YOUR_DEVELOPMENT_API_KEY_HERE
TRIGGER_API_URL=https://cloud.trigger.dev

```

Replace `ENTER_YOUR_DEVELOPMENT_API_KEY_HERE` with the actual API key obtained from the previous step.

## Configuring the Trigger Client

To set up the Trigger Client for your project, follow these steps:

1. **Create Configuration File:**

   In your project directory, create a configuration file named `trigger.ts` or `trigger.js`, depending on whether your project uses TypeScript (`.ts`) or JavaScript (`.js`).

2. **Choose Directory:**

   Create the file within the `src` directory. You can also create it directly in the project root.

3. **Add Configuration Code:**

   Open the configuration file you created and add the following code:

   ```typescript src/trigger.(ts/js)
   // trigger.ts (for TypeScript) or trigger.js (for JavaScript)

   import { TriggerClient } from "@trigger.dev/sdk";
   import { TRIGGER_API_KEY, TRIGGER_API_URL } from "$env/static/private";

   export const client = new TriggerClient({
     id: "my-app",
     apiKey: TRIGGER_API_KEY,
     apiUrl: TRIGGER_API_URL,
   });
   ```

   Replace **"my-app"** with an appropriate identifier for your project. The **apiKey** and **apiUrl** are obtained from the environment variables you set earlier.

4. **File Location:**

   Example Directory Structure:

   ```
       project-root/
       ├── src/
           ├── trigger.ts
       ├── other files...
   ```

  Example Directory Structure where the file is stored in the project root

   ```
       project-root/
       |──src/
           |──other files...
       ├── trigger.ts
       ├── other files...
   ```

By following these steps, you'll configure the Trigger Client to work with your project, regardless of whether you're using TypeScript or JavaScript files.

## Creating the API Route

To establish an API route for interacting with Trigger.dev, follow these steps based on your project's file type and structure

1. Create a new file named `+server.(ts/js)` within the `src/routes/api/trigger` directory.
2. Add the following code to `trigger.(ts/js)`:

```typescript
import { createSvelteRoute } from "@trigger.dev/sveltekit";

import { client } from "$trigger";

// Replace this with your own jobs
import "$jobs/example";

// Create the Svelte route handler using the createSvelteRoute function
const svelteRoute = createSvelteRoute(client);

// Define your API route handler
export const POST = svelteRoute.POST;
```

## Creating the Example Job

1. Create a folder named `Jobs` alongside your `src` directory
2. Inside the `Jobs` folder, add two files named `example.(ts/js)` and `index.(ts/js)`.

<CodeGroup>

```typescript src/jobs/example.(ts/js)
import { eventTrigger } from "@trigger.dev/sdk";
import { client } from "$trigger";

// your first job
client.defineJob({
  id: "example-job",
  name: "Example Job",
  version: "0.0.1",
  trigger: eventTrigger({
    name: "example.event",
  }),
  run: async (payload, io, ctx) => {
    await io.logger.info("Hello world!", { payload });

    return {
      message: "Hello world!",
    };
  },
});
```

```typescript index.(ts/js)
// import all your job files here

export * from "./examples";
```

</CodeGroup>

## Additonal Job Definitions

You can define more job definitions by creating additional files in the `Jobs` folder and exporting them in `index` file.

For example, in `index.(ts/js)`, you can export other job files like this:

```typescript
// import all your job files here

export * from "./examples";
export * from "./other-job-file";
```

## Adding Configuration to `package.json`

Inside the `package.json` file, add the following configuration under the root object:

```json
"trigger.dev": {
  "endpointId": "my-app"
}
```

Your `package.json` file might look something like this:

```json
{
  "name": "my-app",
  "version": "1.0.0",
  "dependencies": {
    // ... other dependencies
  },
  "trigger.dev": {
    "endpointId": "my-app"
  }
}
```

Replace **"my-app"** with the appropriate identifier you used during the step for creating the Trigger Client.

## Running

### Run your Sveltekit app

Run your Sveltekit app locally, like you normally would. For example:

<CodeGroup>

```bash npm
npm run dev
```

```bash pnpm
pnpm run dev
```

```bash yarn
yarn run dev
```

</CodeGroup>

### Run the CLI 'dev' command

In a **_separate terminal window or tab_** run:

<CodeGroup>

```bash npm
npx @trigger.dev/cli@latest dev
```

```bash pnpm
pnpm dlx @trigger.dev/cli@latest dev
```

```bash yarn
yarn dlx @trigger.dev/cli@latest dev
```

</CodeGroup>
<br />
<Note>
  You can optionally pass the port if you're not running on 3000 by adding
  `--port 5173` to the end
</Note>
<Note>
  You can optionally pass the hostname if you're not running on localhost by adding
  `--hostname <host>`. Example, in case your Sveltekit app is running on 0.0.0.0: `--hostname 0.0.0.0`.
</Note>
