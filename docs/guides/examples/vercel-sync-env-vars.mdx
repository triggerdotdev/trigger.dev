---
title: "Syncing environment variables from your Vercel projects"
sidebarTitle: "Syncing Vercel env vars"
description: "This example demonstrates how to sync environment variables from your Vercel project to Trigger.dev."
---

import VercelDocsCards from "/snippets/vercel-docs-cards.mdx";

## Overview

This example shows how to automatically sync environment variables from your Vercel project to Trigger.dev.

## Build configuration

To sync environment variables from your Vercel project to Trigger.dev, you'll first need to add this build configuration to your `trigger.config.ts` file. This extension will then automatically run every time you deploy your project.

This code syncs encrypted environment variables, filtering them based on the current environment (production, preview, or development).

```ts trigger.config.ts
import { defineConfig } from "@trigger.dev/sdk/v3";
import { vercelSyncEnvVars } from "@trigger.dev/build/extensions/vercelSyncEnvVars";

export default defineConfig({
  build: {
    extensions:
     extensions: [
      syncVercelEnvVars(),
      syncEnvVars(async (ctx) => {
        const environmentMap = {
          // Account for the different environment names used by Vercel
        prod: "production",
          staging: "preview",
          dev: "development",
        } as const;

        const vercelEnvironment =
          environmentMap[ctx.environment as keyof typeof environmentMap];

        const vercelApiUrl =
          `https://api.vercel.com/v8/projects/${process.env.VERCEL_PROJECT_ID}/env?decrypt=true`;

        const response = await fetch(vercelApiUrl, {
          headers: {
            Authorization: `Bearer ${process.env.VERCEL_ACCESS_TOKEN}`,
          },
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        const filteredEnvs = data.envs
          .filter(
            (env: { type: string; value: string; target: string[] }) =>
              env.type === "encrypted" &&
              env.value &&
              env.target.includes(vercelEnvironment),
          )
          .map((env: { key: string; value: string }) => ({
            name: env.key,
            value: env.value,
          }));

        return filteredEnvs;
      }),
    ],,
  },
});
```

<Note>
  [Build extensions](/config/config-file#extensions) allow you to hook into the build system and
  customize the build process or the resulting bundle and container image (in the case of
  deploying). You can use pre-built extensions or create your own.
</Note>

## Running the sync operation

To run the sync operation, simply run the `deploy` command. You should see some output in the console indicating that the environment variables have been synced, and they should now be available in the Trigger.dev dashboard.

```bash
npx trigger.dev@latest deploy
```

<VercelDocsCards />
